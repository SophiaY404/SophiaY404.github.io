<!DOCTYPE html>
<html lang="en">
<script src="https://d3js.org/d3.v7.min.js"></script>
<style> circle {fill:lightblue; stroke:black;}</style>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>2017 Fuel Efficiency</title>
	<!-- <link rel="stylesheet" href="style.css"> -->
  </head>
  
  <body onload="scene1()">
	<h1>Data Visualization Project: How Attributes of Automobiles Affect Fuel Efficiency in 2017</h1>
	
	<div>
		<button onclick="scene1()">Scene 1</button>
		<button onclick="scene2()">Scene 2</button>
		<button onclick="scene3()">Scene 3</button>
	</div>
	
	<div id="content1">
		<h3>How does average highway mileage differ among major car brands?</h3>
	</div>
	
	<div id="content2">
		<h3>How does fuel type affect average highway mileage?</h3>
	</div>
	
	<div id="content3">
		<h3>How does the number of engine cylinders affect average highway mileage?</h3>
	</div>
	
	
	<svg id="viz1" width="900" height="900"></svg>
	<svg id="viz2" width="900" height="900"></svg>
	<svg id="viz3" width="900" height="900"></svg>
	
	<script>
		
		var makes = ["Acura", "Alfa Romeo", "Aston Martin", "Audi", "Bentley", "BMW", "Buick", "Cadillac", "Chevrolet", "Chrysler",
    "Dodge", "Ferrari", "Fiat", "Ford", "Genesis", "GMC", "Honda", "Hyundai", "Infiniti", "Jaguar", "Jeep", "Kia", "Lamborghini",
    "Land Rover", "Lexus", "Lincoln", "Lotus", "Maserati", "Mazda", "McLaren Automotive", "Mercedes-Benz", "MINI", "Mitsubishi",
    "Nissan", "Porsche", "Ram", "Rolls-Royce", "Roush Performance", "smart", "Subaru", "Tesla", "Toyota", "Volkswagen", "Volvo"];
	
		async function scene1(){
			const data = await d3.csv('https://flunky.github.io/cars2017.csv');
			document.getElementById("viz1").style.display = "";
			document.getElementById("content1").style.display = "";
			
			document.getElementById("viz2").style.display = "none";
			document.getElementById("content2").style.display = "none";
			
			document.getElementById("viz3").style.display = "none";
			document.getElementById("content3").style.display = "none";
			
			var x = d3.scaleBand().domain([10, 20, 30, 40, 50]).range([0, 700]);
			var y = d3.scaleLinear().domain([0, 120]).range([700, 0]);
			var scene1Scale = d3.scaleBand().domain(data.map(function (d) { return d.Make; })).range([0, 700])
			
			// add y axis
			d3.select("#viz1")
				.append("g")
				.attr("transform", "translate("+50+","+20+")")
				.attr("class", "axis")
				.call(d3.axisLeft(y));
			
			// add y axis label
			d3.select("#viz1")
				.append("text")
				.attr("x", -350)
				.attr("y", 15)
				.attr("transform", "rotate("+-90+")")
				.attr("text-anchor", "middle")
				.text("Mileage")
			
			// add x axis
			d3.select("#viz1")
				.append("g")
				.attr("transform","translate("+50+","+750+")")
				.call(d3.axisBottom(scene1Scale))
				.selectAll("text")
				.attr("transform", "translate("+-10+","+0+")rotate("+-30+")")
				.style("text-anchor", "end");
				
			// add x axis label
			d3.select("#viz1")
				.append("text")
				.attr("x", 400)
				.attr("y", 850)
				.attr("text-anchor", "middle")
				.text("Car brand")
			
			d3.select("#viz1")
				.append("g")
				.attr("transform","translate("+50+","+50+")")
				.selectAll("scene1bar").data(data).enter().append("rect")
				.attr("x", function(d,i) {return scene1Scale(makes[i]);})
				.attr("y", function(d,i) {return y(d.AverageHighwayMPG);})
				.attr("width", scene1Scale.bandwidth() - 5)
				.attr("height", function (d, i) { return 700 - y(d.AverageHighwayMPG); })
				.attr("fill", "purple");
		}
		
		function scene2(){
			document.getElementById("viz1").style.display = "none";
			document.getElementById("content1").style.display = "none";
			
			document.getElementById("viz2").style.display = "";
			document.getElementById("content2").style.display = "";
			
			document.getElementById("viz3").style.display = "none";
			document.getElementById("content3").style.display = "none";
		}
		
		function scene3(){
			document.getElementById("viz1").style.display = "none";
			document.getElementById("content1").style.display = "none";
			
			document.getElementById("viz2").style.display = "none";
			document.getElementById("content2").style.display = "none";
			
			document.getElementById("viz3").style.display = "";
			document.getElementById("content3").style.display = "";
		}
	</script>
  </body>
</html>